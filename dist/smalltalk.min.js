"use strict";!function(n){function t(n){function e(n,t,e,r){if(!Array.isArray(r))throw Error("buttons should be array!");return'<div class="page">\n                <div data-name="js-close" class="close-button"></div>\n                <h1>'+n+'</h1>\n                <div class="content-area">\n                    '+t+"\n                    "+e+'\n                </div>\n                <div class="action-area">\n                    <div class="button-strip"> '+r.map(function(n,t){return"<button tabindex="+t+' data-name="js-'+n.toLowerCase()+'">'+n+"</button>"}).join("")+"\n                    </div>\n                </div>\n            </div>"}function r(n,t,r,c,s){var d=document.createElement("div"),f=["cancel","close","ok"],v=void 0,m=void 0,p=new Promise(function(n,t){var e=s&&!s.cancel,r=function(){};v=n,m=t,e&&(m=r)}),h=e(n,t,r,c);return d.innerHTML=h,d.className="smalltalk",document.body.appendChild(d),i(d,["ok"]).forEach(function(n){return n.focus()}),i(d,["input"]).forEach(function(n){return n.setSelectionRange(0,r.length)}),o("click",d,f,function(n){return u(n.target,d,v,m)}),["click","contextmenu"].forEach(function(n){return d.addEventListener(n,function(){return i(d,["ok","input"]).forEach(function(n){return n.focus()})})}),d.addEventListener("keydown",function(n){var t=13,e=27,r=9,o=n.keyCode,c=n.target;switch(o){case t:u(c,d,v,m);break;case e:l(),m();break;case r:var s=["cancel","ok","input"],f=i(d,s).map(function(n){return n.getAttribute("data-name").replace("js-","")});n.shiftKey&&a(d,f),a(d,f),n.preventDefault()}}),p}function a(n,t){var e=document.activeElement,r=e.getAttribute("data-name").replace("js-",""),a=t.length-1,u=t.indexOf(r);u===a?u=0:a>u&&++u;var o=t[u];i(n,[o]).forEach(function(n){return n.focus()})}function u(n,t,e,r){var a=void 0,u=n.getAttribute("data-name").replace("js-","");/close|cancel/.test(u)?r():(a=i(t,["input"]).reduce(function(n,t){return t.value},null),e(a)),l()}function i(n,t){var e=t.map(function(t){return n.querySelector('[data-name="js-'+t+'"]')}).filter(function(n){return n});return e}function o(n,t,e,r){i(t,e).forEach(function(t){return t.addEventListener(n,function(n){return r(n)})})}function c(n){var t=document.querySelector(n);t.parentElement.removeChild(t)}function s(n){var t=[].slice.call(arguments,1);return n.bind(null,t)}if(!(this instanceof t))return new t(n);var l=s(c,".smalltalk"),d=["OK"],f=["Cancel","OK"];this.alert=function(n,t,e){return r(n,t,"",d,e)},this.prompt=function(n,t,e,a){var u=e||"",i='<input type="text" value="'+u+'" data-name="js-input">';return r(n,t,i,f,a)},this.confirm=function(n,t,e){return r(n,t,"",f,e)}}"undefined"!=typeof module&&module.exports?module.exports=t():n.smalltalk=t()}("undefined"!=typeof window&&window);
